using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Aufgabe17
{
    internal class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Bitte gib dein Geburtsdatum ein (tt.MM.yyyy): ");
            string eingabe = Console.ReadLine();

            if (DateTime.TryParseExact(eingabe, "dd.MM.yyyy", null, System.Globalization.DateTimeStyles.None, out DateTime geburtsdatum))
            {
                DateTime heute = DateTime.Now;
                
                if (geburtsdatum <= heute)
                {
                    BerechneBAlter(geburtsdatum, heute);
                }
                else
                {
                    Console.WriteLine("Das Geburtsdatum darf nicht in der Zukunft liegen!");
                }
            }
            else
            {
                Console.WriteLine("Ungültiges Datumsformat! Bitte verwende das Format tt.MM.yyyy");
            }

            Console.WriteLine("\nDrücken Sie eine beliebige Taste zum Beenden...");
            Console.ReadKey();
        }

        static void BerechneBAlter(DateTime geburtsdatum, DateTime heute)
        {
            // Alter in Jahren - nur komplett abgelaufene Jahre
            int jahre = heute.Year - geburtsdatum.Year;
            if (heute.Month < geburtsdatum.Month || 
                (heute.Month == geburtsdatum.Month && heute.Day < geburtsdatum.Day))
            {
                jahre--;
            }

            // Alter in Monaten - nur komplett abgelaufene Monate
            int monate = (heute.Year - geburtsdatum.Year) * 12 + (heute.Month - geburtsdatum.Month);
            if (heute.Day < geburtsdatum.Day)
            {
                monate--;
            }

            // Gesamte Zeitspanne berechnen
            TimeSpan zeitspanne = heute - geburtsdatum;
            
            // Alter in Wochen
            int wochen = (int)(zeitspanne.TotalDays / 7);

            // Alter in Tagen
            int tage = (int)zeitspanne.TotalDays;

            Console.WriteLine($"Alter in Jahren: {jahre}");
            Console.WriteLine($"Alter in Monaten: {monate}");
            Console.WriteLine($"Alter in Wochen: {wochen}");
            Console.WriteLine($"Alter in Tagen: {tage}");
        }
    }
}
